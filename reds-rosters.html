<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>reds rosters · m49n</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }

      .roster-name a {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: #c8ffd0;
        text-decoration: none;
      }

      .roster-name a:hover {
        text-decoration: underline;
        text-decoration-color: #4af626;
      }

      .wiki-badge {
        font-size: 0.65rem;
        padding: 1px 4px;
        border-radius: 999px;
        border: 1px solid #2f6b3c;
        color: #7af48c;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        background: rgba(74, 246, 38, 0.08);
      }

      body {
        margin: 0;
        padding: 40px 20px;
        font-family: "JetBrains Mono", ui-monospace, Menlo, Monaco, Consolas,
          "Courier New", monospace;
        background: #050505;
        color: #e5e5e5;
      }

      .page-layout {
        max-width: 1240px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 260px 1fr;
        gap: 24px;
        align-items: start;
      }

      main {
        max-width: 960px;
        width: 100%;
        margin: 0 auto;
        grid-column: 2;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .top-link {
        font-size: 0.8rem;
        color: #777;
        margin-bottom: 12px;
        display: inline-block;
      }

      .title {
        font-size: 1.3rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 4px;
      }

      .subtitle {
        font-size: 0.9rem;
        color: #888;
        margin-bottom: 18px;
        line-height: 1.6;
      }

      .divider {
        border: none;
        border-top: 1px solid #222;
        margin: 0 0 24px 0;
      }

      .section-label {
        font-size: 0.8rem;
        color: #777;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        margin-bottom: 12px;
      }

      .roster-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .year-panel {
        border: 1px solid #111;
        border-radius: 10px;
        overflow: hidden;
        background: radial-gradient(circle at top left, #0d0d0d 0, #040404 70%);
      }

      .year-panel[open] {
        border-color: #1f1f1f;
        box-shadow: 0 0 0 1px #0f0f0f;
      }

      .year-summary {
        padding: 12px 14px;
        font-size: 1rem;
        letter-spacing: 0.04em;
        cursor: pointer;
        list-style: none;
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }

      .year-summary::-webkit-details-marker {
        display: none;
      }

      .year-summary::after {
        content: "↓";
        margin-left: auto;
        color: #4af626;
      }

      .year-panel[open] .year-summary::after {
        content: "↑";
      }

      .record-badge {
        color: #4af626;
        font-size: 0.9rem;
      }

      .summary-text {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .year-header {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .season-note {
        font-size: 0.85rem;
        color: #888;
      }

      .permanent-record-link {
        color: #7af48c;
      }

      .permanent-record-link:hover {
        color: #9bf7a6;
      }

      .roster-content {
        padding: 0 14px 14px 14px;
        font-size: 0.9rem;
        color: #cfcfcf;
      }

      .roster-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 10px;
        margin-top: 10px;
      }

      .roster-item {
        border: 1px solid #151515;
        border-radius: 8px;
        padding: 10px;
        background: #0a0a0a;
      }

      .roster-name {
        font-size: 0.95rem;
      }

      .roster-meta {
        font-size: 0.8rem;
        color: #888;
        margin-top: 4px;
      }

      .ebay-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 16px;
        font-size: 0.9rem;
      }

      .ebay-toggle-label {
        color: #888;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-size: 0.8rem;
      }

      .ebay-toggle-options {
        display: inline-flex;
        gap: 6px;
      }

      .ebay-toggle-button {
        border: 1px solid #1b1b1b;
        background: #0a0a0a;
        color: #e5e5e5;
        padding: 6px 10px;
        border-radius: 8px;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.85rem;
      }

      .ebay-toggle-button.is-active {
        border-color: #4af626;
        color: #4af626;
        box-shadow: 0 0 0 1px rgba(74, 246, 38, 0.35);
      }

      .view-toggle {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0 4px;
        font-size: 0.9rem;
      }

      .view-toggle-label {
        color: #888;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        font-size: 0.8rem;
      }

      .view-toggle-options {
        display: inline-flex;
        gap: 6px;
      }

      .view-toggle-button {
        border: 1px solid #1b1b1b;
        background: #060606;
        color: #e5e5e5;
        padding: 5px 10px;
        border-radius: 14px;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.82rem;
        letter-spacing: 0.04em;
      }

      .view-toggle-button.is-active {
        border-color: #4af626;
        color: #4af626;
        box-shadow: 0 0 0 1px rgba(74, 246, 38, 0.35);
        background: #0c0c0c;
      }

      body[data-view="compact"] .player:not(.key) {
        display: none;
      }

      .footer {
        font-size: 0.75rem;
        color: #666;
        margin-top: 24px;
      }

      .back-footer {
        display: block;
        margin-top: 12px;
        padding: 12px 14px;
        background: #4af626;
        color: #050505;
        text-align: center;
        font-weight: 600;
        border-radius: 10px;
      }

      .back-footer:hover {
        text-decoration: none;
        opacity: 0.9;
      }

      .banner-column {
        display: flex;
        justify-content: flex-start;
        grid-column: 1;
        grid-row: 1;
      }

      .banner-card {
        border: 1px solid #151515;
        border-radius: 10px;
        background: #0a0a0a;
        padding: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      }

      .banner-image {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 8px;
      }

      @media (max-width: 960px) {
        .page-layout {
          grid-template-columns: 1fr;
        }

        main,
        .banner-column {
          grid-column: auto;
          grid-row: auto;
        }

        .banner-column {
          justify-content: center;
        }

        .banner-card {
          max-width: 360px;
          width: 100%;
        }
      }

      @media (max-width: 600px) {
        body {
          padding: 28px 16px;
        }

        .year-summary {
          font-size: 0.95rem;
        }
      }
    </style>
  </head>

  <body data-view="compact">
    <div class="page-layout">
      <main>
        <a class="top-link" href="mlb-rosters.html">← mlb rosters</a>

        <header>
          <div class="title">reds rosters</div>
          <div class="subtitle">
            every Cincinnati Red on the roster, listed year by year from the
            2025 season back through the past 25 seasons. Expand a season to
            load the names, numbers, and positions directly from MLB's public
            stats API.
          </div>

          <div class="ebay-toggle" aria-label="eBay search toggle">
            <span class="ebay-toggle-label">Ebay Search Toggle</span>
            <div id="ebay-toggle-options" class="ebay-toggle-options"></div>
          </div>
          <hr class="divider" />
        </header>

        <section>
          <div class="section-label">rosters by year</div>
          <div class="view-toggle" aria-label="Roster view toggle">
            <span class="view-toggle-label">View</span>
            <div id="view-toggle-options" class="view-toggle-options">
              <button
                type="button"
                class="view-toggle-button is-active"
                data-view="compact"
              >
                Compact
              </button>
              <button
                type="button"
                class="view-toggle-button"
                data-view="full"
              >
                Full
              </button>
            </div>
          </div>
          <div id="roster-list" class="roster-list"></div>
        </section>

        <div class="footer">m49n · reds rosters</div>
        <a class="back-footer" href="mlb-rosters.html">← back to mlb rosters</a>
      </main>

      <aside class="banner-column" aria-label="Elly De La Cruz banner">
        <div class="banner-card">
          <img
            class="banner-image"
            src="images/banners/elly.jpg"
            alt="Elly De La Cruz banner"
            loading="lazy"
          />
        </div>
      </aside>
    </div>

    <script>
      const rosterList = document.getElementById("roster-list");

      const ebayToggleOptions = document.getElementById("ebay-toggle-options");
      const viewToggleOptions = document.getElementById("view-toggle-options");
      const EBAY_ADDON_KEY = "m49n_roster_ebay_addon";
      const EBAY_ADDON_OPTIONS = ["All", "Topps", "Stadium Club", "Panini", "Chrome", "Auto", "RC"];
      const ROSTER_VIEW_PREF_KEY = "rosterViewPreference";
      const VIEW_OPTIONS = ["full", "compact"];
      const KEY_PLAYER_MIN_COUNT = 12;
      const KEY_PLAYER_MAX_COUNT = 16;

      const seasonSummaries = {
        2025: {
          place: "season in progress",
          summary: "Betting on the youth movement to push them into true contention.",
        },
        2024: {
          place: "season in progress",
          summary: "Dynamic young core aiming to build on last year's near-miss.",
        },
        2023: {
          place: "3rd place NL Central",
          summary: "Energized by rookies but fell just short of a surprise playoff spot.",
        },
        2022: {
          place: "4th place NL Central",
          summary: "Injury-riddled reset produced 100 losses and a look toward the future.",
        },
        2021: {
          place: "3rd place NL Central",
          summary: "Strong offense faded in September and a Wild Card bid slipped away.",
        },
        2020: {
          place: "3rd place NL Central",
          summary: "Pitching-led group made the expanded playoffs but was shut out in the Wild Card round.",
        },
        2019: {
          place: "4th place NL Central",
          summary: "Improved pitching wasn't enough to climb beyond fourth place.",
        },
        2018: {
          place: "5th place NL Central",
          summary: "Another last-place finish despite a midseason managerial change.",
        },
        2017: {
          place: "5th place NL Central",
          summary: "Rebuild continued with Joey Votto starring on a 94-loss team.",
        },
        2016: {
          place: "5th place NL Central",
          summary: "Development year marked by big homer totals but thin pitching.",
        },
        2015: {
          place: "5th place NL Central",
          summary: "Trade-deadline teardown led to a franchise-record losing skid.",
        },
        2014: {
          place: "4th place NL Central",
          summary: "Injuries to stars derailed a season that spiraled after the break.",
        },
        2013: {
          place: "3rd place NL Central",
          summary: "Won 90 games but bowed out in the Wild Card Game in Pittsburgh.",
        },
        2012: {
          place: "1st place NL Central",
          summary: "97-win powerhouse stunned by San Francisco after leading the NLDS 2-0.",
        },
        2011: {
          place: "3rd place NL Central",
          summary: "Could not replicate 2010's magic amid injuries and inconsistency.",
        },
        2010: {
          place: "1st place NL Central",
          summary: "Breakthrough division title ended by a sweep from the Phillies in the NLDS.",
        },
        2009: {
          place: "4th place NL Central",
          summary: "Late-season improvement set the stage for the next year's leap.",
        },
        2008: {
          place: "5th place NL Central",
          summary: "Another rebuilding year under new skipper Dusty Baker.",
        },
        2007: {
          place: "5th place NL Central",
          summary: "Offense-heavy club couldn't overcome persistent pitching woes.",
        },
        2006: {
          place: "3rd place NL Central",
          summary: "Hung in the race into September before fading to third.",
        },
        2005: {
          place: "5th place NL Central",
          summary: "Powerful bats couldn't mask a shaky pitching staff.",
        },
        2004: {
          place: "4th place NL Central",
          summary: "Early promise faded into a sub-.500 finish.",
        },
        2003: {
          place: "5th place NL Central",
          summary: "Injuries sank the Reds' first season at Great American Ball Park.",
        },
        2002: {
          place: "3rd place NL Central",
          summary: "Solid start gave way to a middling finish without October baseball.",
        },
        2001: {
          place: "5th place NL Central",
          summary: "Injury-plagued club tumbled after a hot April.",
        },
      };

      const years = Array.from({ length: 25 }, (_, index) => 2025 - index);


      const savedAddon = localStorage.getItem(EBAY_ADDON_KEY);
      let currentEbayAddon = EBAY_ADDON_OPTIONS.includes(savedAddon)
        ? savedAddon
        : "All";
      const savedViewPreference = localStorage.getItem(ROSTER_VIEW_PREF_KEY);
      let currentRosterView = VIEW_OPTIONS.includes(savedViewPreference)
        ? savedViewPreference
        : "compact";

      function setRosterView(view) {
        const nextView = VIEW_OPTIONS.includes(view) ? view : "compact";
        currentRosterView = nextView;
        document.body.dataset.view = currentRosterView;
        localStorage.setItem(ROSTER_VIEW_PREF_KEY, currentRosterView);

        viewToggleOptions
          .querySelectorAll(".view-toggle-button")
          .forEach((button) => {
            button.classList.toggle(
              "is-active",
              button.dataset.view === currentRosterView
            );
          });
      }

      function bindRosterViewToggle() {
        viewToggleOptions
          .querySelectorAll(".view-toggle-button")
          .forEach((button) => {
            button.addEventListener("click", () => {
              setRosterView(button.dataset.view);
            });
          });
      }

      function setEbayAddon(addon) {
        currentEbayAddon = addon;
        localStorage.setItem(EBAY_ADDON_KEY, addon);

        ebayToggleOptions
          .querySelectorAll(".ebay-toggle-button")
          .forEach((button) => {
            button.classList.toggle(
              "is-active",
              button.dataset.addon === currentEbayAddon
            );
          });
      }

      function renderEbayToggle() {
        EBAY_ADDON_OPTIONS.forEach((option) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "ebay-toggle-button";
          button.dataset.addon = option;
          button.textContent = option;

          button.addEventListener("click", () => {
            setEbayAddon(option);
          });

          ebayToggleOptions.appendChild(button);
        });

        setEbayAddon(currentEbayAddon);
      }

      setRosterView(currentRosterView);
      bindRosterViewToggle();

      renderEbayToggle();

      rosterList.addEventListener("click", (event) => {
        const link = event.target.closest(".roster-name a");

        if (!link) return;

        const playerName = link.dataset.player || link.textContent;

        if (!playerName) return;

        event.preventDefault();

        const searchUrl = buildEbaySearchUrl(playerName);

        window.open(searchUrl, "_blank", "noopener,noreferrer");
      });

      years.forEach((year) => {
        const details = document.createElement("details");
        details.className = "year-panel";

        const summary = document.createElement("summary");
        summary.className = "year-summary";
        const yearLabel = document.createElement("span");
        yearLabel.textContent = year;

        const seasonData = seasonSummaries[year];

        const summaryText = document.createElement("div");
        summaryText.className = "summary-text";

        const headerRow = document.createElement("div");
        headerRow.className = "year-header";

        const record = document.createElement("span");
        record.className = "record-badge";
        record.textContent = seasonData?.place || "loading record...";

        headerRow.appendChild(yearLabel);
        headerRow.appendChild(record);
        summaryText.appendChild(headerRow);

        const description = document.createElement("div");
        description.className = "season-note";
        const descriptionText = document.createElement("span");
        descriptionText.textContent =
          seasonData?.summary || "Season summary not available.";

        const permanentRecordLink = document.createElement("a");
        permanentRecordLink.className = "permanent-record-link";
        permanentRecordLink.href = `https://www.baseball-reference.com/teams/CIN/${year}.shtml`;
        permanentRecordLink.target = "_blank";
        permanentRecordLink.rel = "noopener noreferrer";
        permanentRecordLink.textContent = "season statistics";

        description.append(
          descriptionText,
          document.createTextNode(" "),
          permanentRecordLink
        );
        summaryText.appendChild(description);

        summary.appendChild(summaryText);
        details.appendChild(summary);

        fetchSeasonRecord(year)
          .then((recordText) => {
            record.textContent = recordText;
          })
          .catch(() => {
            record.textContent = seasonData?.place || "record unavailable";
          });

        const content = document.createElement("div");
        content.className = "roster-content";
        content.textContent = "Open to load roster...";
        details.appendChild(content);

        let loaded = false;
        details.addEventListener("toggle", () => {
          if (details.open && !loaded) {
            loaded = true;
            loadRoster(year, content);
          }
        });

        rosterList.appendChild(details);
      });

      function toOrdinal(value) {
        const number = Number(value);

        if (!Number.isFinite(number)) {
          return null;
        }

        const remainderTen = number % 10;
        const remainderHundred = number % 100;

        if (remainderTen === 1 && remainderHundred !== 11) return `${number}st`;
        if (remainderTen === 2 && remainderHundred !== 12) return `${number}nd`;
        if (remainderTen === 3 && remainderHundred !== 13) return `${number}rd`;
        return `${number}th`;
      }

      function calculateKeyCount(totalPlayers) {
        if (!Number.isFinite(totalPlayers) || totalPlayers <= 0) {
          return KEY_PLAYER_MIN_COUNT;
        }

        const candidate = Math.round(totalPlayers * 0.35);
        return Math.min(
          KEY_PLAYER_MAX_COUNT,
          Math.max(KEY_PLAYER_MIN_COUNT, candidate)
        );
      }

      function formatAccolades(record) {
        if (!record || typeof record !== "object") return [];

        const accolades = [];
        const leagueName = record.league?.abbrev || record.league?.name;

        if (record.divisionLeader || record.divisionChamp) {
          accolades.push("division title");
        }

        if (record.leagueChamp) {
          accolades.push(leagueName ? `${leagueName} champions` : "league champions");
        }

        if (record.worldSeriesChamp) {
          accolades.push("World Series champions");
        }

        return accolades;
      }


      function buildEbaySearchUrl(playerName, addon = currentEbayAddon) {
        if (!playerName) return null;

        const searchAddon = addon === "All" ? playerName : `${playerName} ${addon}`;

        return `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(searchAddon)}`;
      }

      async function fetchSeasonRecord(year) {
        const standingsUrl =
          "https://statsapi.mlb.com/api/v1/standings?leagueId=104" +
          `&season=${year}` +
          "&teamId=113&standingsTypes=regularSeason";

        const response = await fetch(standingsUrl);

        if (!response.ok) {
          throw new Error("Could not load standings");
        }

        const data = await response.json();
        const teamRecords = (data.records || []).reduce((all, record) => {
          if (record.teamRecords) {
            return all.concat(record.teamRecords);
          }
          return all;
        }, []);

        const redsRecord = teamRecords.find((record) => record.team?.id === 113);

        const wins = redsRecord?.wins;
        const losses = redsRecord?.losses;
        const divisionRank = redsRecord?.divisionRank;
        const divisionName = redsRecord?.division?.name;

        const ordinalRank = toOrdinal(divisionRank);
        const placeText = ordinalRank
          ? divisionName
            ? `${ordinalRank} place ${divisionName}`
            : `${ordinalRank} place`
          : null;

        const accolades = formatAccolades(redsRecord);

        if (typeof wins === "number" && typeof losses === "number") {
          let display = `${wins} - ${losses}`;

          if (placeText) {
            display += `, ${placeText}`;
          }

          if (accolades.length) {
            display += ` (${accolades.join("; ")})`;
          }

          return display;
        }

        throw new Error("No record data found");
      }

      async function loadRoster(year, target) {
        target.textContent = "Loading roster...";

        try {
          const response = await fetch(
            `https://statsapi.mlb.com/api/v1/teams/113/roster?rosterType=fullSeason&season=${year}`
          );

          if (!response.ok) {
            throw new Error("Network response was not ok");
          }

          const data = await response.json();
          const roster = data.roster || [];

          if (!roster.length) {
            target.textContent = "No roster data available for this season.";
            return;
          }

          const pitchers = roster.filter(
            (player) => player.position?.abbreviation === "P"
          );

          const positionPlayers = roster.filter(
            (player) => player.position?.abbreviation !== "P"
          );

          const sortByPositionThenName = (a, b) => {
            const positionA = a.position?.abbreviation || "";
            const positionB = b.position?.abbreviation || "";

            const positionCompare = positionA.localeCompare(positionB);
            if (positionCompare !== 0) return positionCompare;

            const nameA = a.person?.fullName || "";
            const nameB = b.person?.fullName || "";

            return nameA.localeCompare(nameB);
          };

          positionPlayers.sort(sortByPositionThenName);
          pitchers.sort(sortByPositionThenName);

          const orderedRoster = [...positionPlayers, ...pitchers];

          const grid = document.createElement("div");
          grid.className = "roster-grid";

          const keyCount = calculateKeyCount(orderedRoster.length);

          orderedRoster.forEach((player, index) => {
            const card = document.createElement("div");
            card.className = "roster-item player";

            if (index < keyCount) {
              card.classList.add("key");
            }

            const name = document.createElement("div");
            name.className = "roster-name";
            const fullName = player.person?.fullName || "Unknown";
            const position = player.position?.abbreviation || "—";
            const ebayUrl = buildEbaySearchUrl(fullName);

            const link = document.createElement("a");
            link.href = ebayUrl;
            link.target = "_blank";
            link.rel = "noreferrer noopener";
            link.title = "Search eBay sportscards ending soonest";
            link.textContent = fullName;
            link.dataset.player = fullName;

            name.appendChild(link);

            const meta = document.createElement("div");
            meta.className = "roster-meta";
            const number = player.jerseyNumber ? `#${player.jerseyNumber}` : "#—";
            meta.textContent = `${number} · ${position}`;

            card.appendChild(name);
            card.appendChild(meta);
            grid.appendChild(card);
          });
          target.innerHTML = "";
          target.appendChild(grid);
        } catch (error) {
          target.textContent = `Could not load roster for ${year}.`;
        }
      }
    </script>
  </body>
</html>
