<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>mlb rosters · m49n</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 40px 20px;
        font-family: "JetBrains Mono", ui-monospace, Menlo, Monaco, Consolas,
          "Courier New", monospace;
        background: #050505;
        color: #e5e5e5;
      }

      .page-layout {
        max-width: 1120px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1fr 260px;
        gap: 28px;
        align-items: start;
      }

      main {
        max-width: 720px;
        width: 100%;
      }

      aside {
        width: 100%;
      }

      .side-banner {
        border: 1px solid #0f0f0f;
        background: #080808;
        border-radius: 14px;
        overflow: hidden;
        position: sticky;
        top: 24px;
      }

      .side-banner img {
        display: block;
        width: 100%;
        height: auto;
      }

      a {
        color: inherit;
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      .top-link {
        font-size: 0.8rem;
        color: #777;
        margin-bottom: 12px;
        display: inline-block;
      }

      .title {
        font-size: 1.3rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 4px;
      }

      .subtitle {
        font-size: 0.9rem;
        color: #888;
        margin-bottom: 18px;
        line-height: 1.5;
      }

      .divider {
        border: none;
        border-top: 1px solid #222;
        margin: 0 0 24px 0;
      }

      .section-label {
        font-size: 0.8rem;
        color: #777;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        margin-bottom: 10px;
      }

      .league-section {
        border: 1px solid #0f0f0f;
        border-radius: 10px;
        padding: 14px;
        background: #080808;
        margin-bottom: 16px;
        display: grid;
        gap: 12px;
      }

      .league-title {
        font-size: 0.9rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #b5b5b5;
      }

      .league-title.nl {
        color: #58a6ff;
      }

      .league-title.al {
        color: #ff6a6a;
      }

      .division-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 10px;
      }

      .division-card {
        border: 1px solid #111;
        border-radius: 10px;
        padding: 10px;
        background: radial-gradient(circle at top left, #0d0d0d 0, #040404 70%);
      }

      .division-title {
        font-size: 0.85rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #9b9b9b;
        margin-bottom: 8px;
      }

      .team-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 6px;
      }

      .team-link {
        display: block;
        padding: 10px 12px;
        border-radius: 8px;
        background: #0a0a0a;
        border: 1px solid #151515;
        transition: border-color 0.2s ease, transform 0.2s ease;
      }

      .team-link:hover {
        text-decoration: none;
        border-color: #1f1f1f;
        transform: translateY(-1px);
      }

      .footer {
        font-size: 0.75rem;
        color: #666;
        margin-top: 24px;
      }

      .random-section {
        margin-top: 32px;
        padding: 16px;
        border: 1px solid #0f0f0f;
        border-radius: 12px;
        background: #080808;
      }

      .random-title {
        font-size: 1.1rem;
        letter-spacing: 0.08em;
        text-transform: lowercase;
        margin: 0 0 4px 0;
      }

      .random-description {
        margin: 0 0 12px 0;
        color: #888;
        font-size: 0.95rem;
      }

      .random-actions {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }

      .ebay-toggle {
        display: inline-flex;
        flex-direction: column;
        gap: 8px;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid #101010;
        background: #0a0a0a;
      }

      .ebay-toggle-label {
        font-size: 0.75rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #777;
      }

      .ebay-toggle-options {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .ebay-toggle-button {
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid #1a1a1a;
        background: #0f0f0f;
        color: #e5e5e5;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.85rem;
        transition: border-color 0.15s ease, background-color 0.15s ease,
          color 0.15s ease;
      }

      .ebay-toggle-button.is-active {
        border-color: #4af626;
        color: #4af626;
      }

      .random-button {
        padding: 10px 14px;
        background: #4af626;
        color: #050505;
        border: none;
        border-radius: 10px;
        font-weight: 700;
        cursor: pointer;
        font-family: inherit;
        font-size: 0.95rem;
        letter-spacing: 0.04em;
        border: 1px solid #1a1a1a;
        text-transform: lowercase;
        transition: transform 0.12s ease, box-shadow 0.12s ease;
      }

      .random-button:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 6px 14px rgba(74, 246, 38, 0.18);
      }

      .random-result {
        margin-top: 14px;
        padding: 12px;
        border: 1px solid #111;
        border-radius: 10px;
        background: #0a0a0a;
        min-height: 60px;
      }

      .player-name {
        font-size: 1rem;
        font-weight: 700;
        margin: 0 0 4px 0;
      }

      .player-meta {
        font-size: 0.9rem;
        color: #9b9b9b;
        margin: 0 0 8px 0;
      }

      .player-meta span + span::before {
        content: " · ";
      }

      .player-link {
        display: inline-block;
        color: #c8ffd0;
      }

      .back-footer {
        display: block;
        margin-top: 12px;
        padding: 12px 14px;
        background: #4af626;
        color: #050505;
        text-align: center;
        font-weight: 600;
        border-radius: 10px;
      }

      .back-footer:hover {
        text-decoration: none;
        opacity: 0.9;
      }

      @media (max-width: 600px) {
        body {
          padding: 28px 16px;
        }

        .page-layout {
          grid-template-columns: 1fr;
        }

        aside {
          max-width: 360px;
          margin: 0 auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="page-layout">
      <main>
        <header>
          <div class="title">mlb rosters</div>
          <div class="subtitle">
            central home for team-by-team roster explorers. start here, then dive
            into the clubs—starting with the cubs, obviously.
          </div>
          <hr class="divider" />
        </header>

        <section>
          <div id="teams" class="section-label">teams</div>

          <div class="league-section">
            <a class="league-title nl" href="https://www.mlb.com/standings">national league</a>
            <div class="division-grid">
              <div class="division-card">
                <div class="division-title">east</div>
                <ul class="team-list">
                  <li><a class="team-link" href="braves-rosters.html">atlanta braves</a></li>
                  <li><a class="team-link" href="marlins-rosters.html">miami marlins</a></li>
                  <li><a class="team-link" href="mets-rosters.html">new york mets</a></li>
                  <li><a class="team-link" href="phillies-rosters.html">philadelphia phillies</a></li>
                  <li><a class="team-link" href="nationals-rosters.html">washington nationals</a></li>
                </ul>
              </div>
              <div class="division-card">
                <div class="division-title">central</div>
                <ul class="team-list">
                  <li><a class="team-link" href="cubs-rosters.html">chicago cubs</a></li>
                  <li><a class="team-link" href="reds-rosters.html">cincinnati reds</a></li>
                  <li><a class="team-link" href="brewers-rosters.html">milwaukee brewers</a></li>
                  <li><a class="team-link" href="pirates-rosters.html">pittsburgh pirates</a></li>
                  <li><a class="team-link" href="cardinals-rosters.html">st. louis cardinals</a></li>
                </ul>
              </div>
              <div class="division-card">
                <div class="division-title">west</div>
                <ul class="team-list">
                  <li><a class="team-link" href="diamondbacks-rosters.html">arizona diamondbacks</a></li>
                  <li><a class="team-link" href="rockies-rosters.html">colorado rockies</a></li>
                  <li><a class="team-link" href="dodgers-rosters.html">los angeles dodgers</a></li>
                  <li><a class="team-link" href="padres-rosters.html">san diego padres</a></li>
                  <li><a class="team-link" href="giants-rosters.html">san francisco giants</a></li>
                </ul>
              </div>
            </div>
          </div>

          <div class="league-section">
            <a class="league-title al" href="https://www.mlb.com/standings">american league</a>
            <div class="division-grid">
              <div class="division-card">
                <div class="division-title">east</div>
                <ul class="team-list">
                  <li><a class="team-link" href="orioles-rosters.html">baltimore orioles</a></li>
                  <li><a class="team-link" href="red-sox-rosters.html">boston red sox</a></li>
                  <li><a class="team-link" href="yankees-rosters.html">new york yankees</a></li>
                  <li><a class="team-link" href="rays-rosters.html">tampa bay rays</a></li>
                  <li><a class="team-link" href="blue-jays-rosters.html">toronto blue jays</a></li>
                </ul>
              </div>
              <div class="division-card">
                <div class="division-title">central</div>
                <ul class="team-list">
                  <li><a class="team-link" href="white-sox-rosters.html">chicago white sox</a></li>
                  <li><a class="team-link" href="guardians-rosters.html">cleveland guardians</a></li>
                  <li><a class="team-link" href="tigers-rosters.html">detroit tigers</a></li>
                  <li><a class="team-link" href="royals-rosters.html">kansas city royals</a></li>
                  <li><a class="team-link" href="twins-rosters.html">minnesota twins</a></li>
                </ul>
              </div>
              <div class="division-card">
                <div class="division-title">west</div>
                <ul class="team-list">
                  <li><a class="team-link" href="angels-rosters.html">anaheim angels</a></li>
                  <li><a class="team-link" href="astros-rosters.html">houston astros</a></li>
                  <li><a class="team-link" href="athletics-rosters.html">oakland athletics</a></li>
                  <li><a class="team-link" href="mariners-rosters.html">seattle mariners</a></li>
                  <li><a class="team-link" href="rangers-rosters.html">texas rangers</a></li>
                </ul>
              </div>
            </div>
          </div>

        </section>

        <section class="random-section" aria-label="random player generator">
          <div class="random-title">the hit</div>
          <p class="random-description">who'd ya pull?</p>
          <div class="random-actions">
            <div class="ebay-toggle" aria-label="eBay search toggle">
              <span class="ebay-toggle-label">Ebay Search Toggle</span>
              <div id="ebay-toggle-options" class="ebay-toggle-options"></div>
            </div>
            <button id="random-button" class="random-button" type="button">
              generate random player
            </button>
          </div>
          <div id="random-result" class="random-result" aria-live="polite"></div>
        </section>

        <div class="footer">m49n · mlb rosters</div>
        <a class="top-link" href="index.html">← m49n</a>
        <a class="top-link" href="https://m49n.com/1959-google-sheet.html">→ 1959 topps google sheet</a>
      </main>

      <aside aria-label="side banner">
        <div class="side-banner">
          <img src="images/banners/ohtanibanner" alt="Shohei Ohtani banner" />
        </div>
      </aside>
    </div>

    <script>
      const LATEST_SEASON = 2025;

      const randomButton = document.getElementById("random-button");
      const randomResult = document.getElementById("random-result");
      const ebayToggleOptions = document.getElementById("ebay-toggle-options");

      const EBAY_ADDON_KEY = "m49n_roster_ebay_addon";
      const EBAY_ADDON_OPTIONS = [
        "All",
        "Topps",
        "Stadium Club",
        "Panini",
        "Chrome",
        "Auto",
        "RC",
      ];

      const savedAddon = localStorage.getItem(EBAY_ADDON_KEY);
      let currentEbayAddon = EBAY_ADDON_OPTIONS.includes(savedAddon)
        ? savedAddon
        : "All";

      function setEbayAddon(addon) {
        currentEbayAddon = addon;
        localStorage.setItem(EBAY_ADDON_KEY, addon);

        ebayToggleOptions
          .querySelectorAll(".ebay-toggle-button")
          .forEach((button) => {
            button.classList.toggle(
              "is-active",
              button.dataset.addon === currentEbayAddon
            );
          });

        const playerLink = randomResult.querySelector(".player-link");
        const playerName = randomResult.querySelector(".player-name")?.textContent;

        if (playerLink && playerName) {
          playerLink.href = buildEbaySearchUrl(playerName, currentEbayAddon);
        }
      }

      function renderEbayToggle() {
        EBAY_ADDON_OPTIONS.forEach((option) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "ebay-toggle-button";
          button.dataset.addon = option;
          button.textContent = option;

          button.addEventListener("click", () => {
            setEbayAddon(option);
          });

          ebayToggleOptions.appendChild(button);
        });

        setEbayAddon(currentEbayAddon);
      }

      let cachedTeams = null;

      function buildEbaySearchUrl(playerName, addon = currentEbayAddon) {
        if (!playerName) return null;

        const searchAddon = addon === "All" ? playerName : `${playerName} ${addon}`;

        return `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(
          searchAddon
        )}`;
      }

      function pickRandom(items) {
        if (!items || !items.length) return null;
        const index = Math.floor(Math.random() * items.length);
        return items[index];
      }

      async function fetchTeams() {
        if (cachedTeams) return cachedTeams;

        const response = await fetch(
          `https://statsapi.mlb.com/api/v1/teams?sportId=1&season=${LATEST_SEASON}`
        );

        if (!response.ok) {
          throw new Error("Could not load teams");
        }

        const data = await response.json();
        cachedTeams = data.teams || [];
        return cachedTeams;
      }

      async function fetchRoster(teamId) {
        const response = await fetch(
          `https://statsapi.mlb.com/api/v1/teams/${teamId}/roster?rosterType=fullSeason&season=${LATEST_SEASON}`
        );

        if (!response.ok) {
          throw new Error("Could not load roster");
        }

        const data = await response.json();
        return data.roster || [];
      }

      function renderPlayerCard(player, teamName) {
        const fullName = player.person?.fullName || "Unknown player";
        const position =
          player.position?.abbreviation || player.position?.name || "Unknown";

        const ebayUrl = buildEbaySearchUrl(fullName);

        randomResult.innerHTML = `
          <div class="player-name">${fullName}</div>
          <div class="player-meta">
            <span>${teamName || "Unknown team"}</span>
            <span>${position}</span>
          </div>
          <a class="player-link" href="${ebayUrl}" target="_blank" rel="noopener noreferrer">eBay search</a>
        `;
      }

      async function generateRandomPlayer() {
        randomResult.textContent = "loading player...";

        try {
          const teams = await fetchTeams();
          const team = pickRandom(teams);

          if (!team?.id) {
            throw new Error("No teams available");
          }

          const roster = await fetchRoster(team.id);
          const player = pickRandom(roster);

          if (!player) {
            throw new Error("No players available");
          }

          renderPlayerCard(player, team.name);
        } catch (error) {
          randomResult.textContent = "couldn't load a player — try again";
          console.error(error);
        }
      }

      renderEbayToggle();

      randomButton.addEventListener("click", generateRandomPlayer);

      fetchTeams().catch((error) => {
        console.error(error);
      });
    </script>
  </body>
</html>
